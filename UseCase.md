# Учебное приложение по автомойке
Интеграция Информационных Систем <br>

## Estimates (Примерные показатели):
  <table>
  <tr>
    <td>Регион</td>
    <td>Сахалинская область</td>
  </tr>
  <tr>
    <td>Численность региона</td>
    <td>500К человек</td>
  </tr>
  <tr>
    <td>DAU</td>
    <td>15% от 500К = 75К </td>
  </tr>
  <tr>
    <td>RPS</td>
    <td>75K/24/3600 ~= 1</td>
  </tr>
</table>


## Функциональные требования:
 ![User Case](/materials/UseCase.png)
### Сценарии использования
#### UC1: Сделать заказ
<table>
  <tr>
    <td>Участники</td>
    <td>Пользователь приложения</td>
  </tr>
  <tr>
    <td>Предусловия</td>
    <td> Пользователь зарегистрирован и авторизован</td>
  </tr>
  <tr>
    <td>Условия для срабатывания</td>
    <td>Пользователь нажимает кнопку "Записаться в автомойку"</td>
  </tr>
  <tr>
    <td>Признак успешности</td>
    <td>Пользователь сделал заказ</td>
  </tr>
</table>

##### Базовый сценарий:
1. Система переходит к сценарию [UC1.1](#uc11-найти-автомойку)
2. Система переходит к сценарию [UC1.2](#uc12-выбрать-услугу)
3. Система переходит к сценарию [UC1.3](#uc13-выбрать-дату-и-время)
4. Система переходит к сценарию [UC1.4](#uc14-оплатить) 
5. Возвращение в главное меню.
6. Сценарий завершен.


#### UC1.1: Найти автомойку
 <table>
  <tr>
    <td>Участники</td>
    <td>Пользователь приложения</td>
  </tr>
  <tr>
    <td>Предусловия</td>
    <td>Пользователь зарегистрирован и авторизован</td>
  </tr>
  <tr>
    <td>Условия для срабатывания</td>
    <td>Пользователь нажал кнопку "Сделать заказ"</td>
  </tr>
  <tr>
    <td>Признак успешности</td>
    <td>Пользователь выбрал автомойку</td>
  </tr>
</table>

##### Базовый сценарий:
1. Система проверяет, что клиент передал свою геолокацию.([AC_1](#альтернативные-сценарии))<br> 
ЕСЛИ: Геолокации нет,<br>
ТО: Система переходит к базовому сценарию 3.
2. Система ищет ближайшие к позиции клиента мойки. ([AL01](#al01-алгоритм-поиска-моек-по-адресу-или-геолокации))
3. Формируется список моек. ([AC_2, AC_3](#альтернативные-сценарии))
4. Система отображает интерфейс "Экран с картой и списком моек". 
5. Система ожидает выбора мойки клиентом.
6. Система возвращается к [UC1](#uc1-сделать-заказ), приступая к следующему шагу сценария.
7. Сценарий завершен.

##### Базовый сценарий 2:
1. Система выводит сообщение клиенту с просьбой разрешить передачу геолокации.
2. ЕСЛИ: клиент разрешил передачу геолокации.<br>
ТО: Система переходит в "Базовый сценарий шаг 2".<br>
ИНАЧЕ: Система переходит в "Базовый сценарий 3".

##### Базовый сценарий 3:
1. Система отображает поле для ввода адреса.
2. Система ожидает от пользователя ввод адреса. ([AC_2](#альтернативные-сценарии))
3. Система переходит в "Базовый сценарий шаг 2.


<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

#### UC1.2: Выбрать услугу

<table>
  <tr>
    <td>Участники</td>
    <td>Пользователь приложения. </td>
  </tr>
  <tr>
    <td>Предусловия</td>
    <td> Пользователь зарегистрирован и авторизован. Автомойка выбрана.</td>
  </tr>
  <tr>
    <td>Условия для срабатывания</td>
    <td>Пользователь нажимает кнопку "Услуги"</td>
  </tr>
  <tr>
    <td>Признак успешности</td>
    <td>Пользователь выбрал услугу(-и)</td>
  </tr>
</table>

##### Базовый сценарий:
1. Система проверяет наличие выбранных пунктов "Автомойка". ([AC_2](#альтернативные-сценарии))
2. Система запрашивает список доступных услуг на автомойке у БД. ([AC_3](#альтернативные-сценарии))
3. Система отображает интерфейс "Список доступных услуг".
4. Система ожидает выбора пользователя.
5. Система возвращается к [UC1](#uc1-сделать-заказ), приступая к следующему шагу сценария.
6. Сценарий завершен.


<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->



#### UC1.3: Выбрать дату и время

<table>
  <tr>
    <td>Участники</td>
    <td>Пользователь приложения</td>
  </tr>
  <tr>
    <td>Предусловия</td>
    <td> Пользователь зарегистрирован и авторизован. Услуги и автомойка выбраны</td>
  </tr>
  <tr>
    <td>Условия для срабатывания</td>
    <td>Пользователь нажимает кнопку "Выбрать дату"</td>
  </tr>
  <tr>
    <td>Признак успешности</td>
    <td>Пользователь выбрал дату и время</td>
  </tr>
</table>

##### Базовый сценарий:
1. Система проверяет, выбрал ли пользователь автомойку. ([AC_1](#альтернативные-сценарии))
2. Система проверяет, наличие выбранных услуг. ([AC_2, AC_3](#альтернативные-сценарии))
3. Система запрашивает доступное время на мойке из БД. ([AC_2, AC_3](#альтернативные-сценарии))
4. Система оценивает время исходя из выбранных услуг.
5. Система формирует периоды времени, в которые пользователь может быть обслужен.
6. Система отображает интерфейс "Экран с доступным временем". 
7. Система ожидает выбора мойки клиентом. 
8. Система резервирует выбранное время в БД. ([AC_2, AC_3, AC_5](#альтернативные-сценарии))
9. Система возвращается к [UC1](#uc1-сделать-заказ), приступая к следующему шагу сценария.
10. Сценарий завершен.



<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

#### UC1.4: Оплатить

<table>
  <tr>
    <td>Участники</td>
    <td>Пользователь приложения</td>
  </tr>
  <tr>
    <td>Предусловия</td>
    <td> Пользователь зарегистрирован и авторизован. Услуги, автомойка и время и дата выбраны.</td>
  </tr>
  <tr>
    <td>Условия для срабатывания</td>
    <td>Пользователь нажимает кнопку "Оплатить" и выберет способ оплаты</td>
  </tr>
  <tr>
    <td>Признак успешности</td>
    <td>Оплата прошла успешна</td>
  </tr>
</table>

##### Базовый сценарий:
1. Система проверяет наличие выбранных пунктов "Автомойка", "Услуги" и "Дата и время". ([AC_1](#альтернативные-сценарии))
2. Система формирует итоговый вариант записи пользователя. 
3. Система отображает интерфейс "Итоговый вариант записи". 
4. Система ожидает выбора способа оплаты. ([AC_5](#альтернативные-сценарии))
ЕСЛИ: Способ оплаты - "Онлайн оплата".
ТО:  Работа с API платежной системы. 
6. Формируется номер записи.
7. Запись помещается в БД и в очередь автомойки. ([AC_2, AC_3](#альтернативные-сценарии))
8. Отображение сообщения о том, что запись успешно сформирована.
9. Сценарий завершен.



<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->



#### UC2: Отменить запись

<table>
  <tr>
    <td>Участники</td>
    <td>Пользователь приложения</td>
  </tr>
  <tr>
    <td>Предусловия</td>
    <td> Пользователь зарегистрирован и авторизован. Имеет запись в автомойку.</td>
  </tr>
  <tr>
    <td>Условия для срабатывания</td>
    <td>Пользователь нажимает кнопку "Отменить запись"</td>
  </tr>
  <tr>
    <td>Признак успешности</td>
    <td>Пользователь отменил активную запись</td>
  </tr>
</table>

##### Базовый сценарий:
1. Система запрашивает у БД активные записи пользователя. ([AC_2, AC_3](#альтернативные-сценарии))
2. Система отображает интерфейс "Экран списка активных записей".
3. Система ожидает выбора пользователем записи на отмену.
4. Система получает номер записи и делает запрос на ее отмену в БД. ([AC_2, AC_3](#альтернативные-сценарии))
5. Система выводит сообщение о том, что запись успешно отменена.
6. Сценарий завершен.


<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->





#### UC3: Техническая поддержка

<table>
  <tr>
    <td>Участники</td>
    <td>Пользователь приложения, тех. поддержка</td>
  </tr>
  <tr>
    <td>Предусловия</td>
    <td> Пользователь зарегистрирован и авторизован</td>
  </tr>
  <tr>
    <td>Условия для срабатывания</td>
    <td>Пользователь нажимает кнопку "Техническая поддержка"</td>
  </tr>
  <tr>
    <td>Признак успешности</td>
    <td>Пользователь связался с технической поддержкой</td>
  </tr>
</table>

##### Базовый сценарий:
1. Система получает список свободных сотрудников тех. поддержки. ([AC_2](#альтернативные-сценарии))
2. Система формирует чат пользователя и одного из свободных сотрудников.
3. Система отображает интерфейс "Чат технической поддержки".
4. Система организует передачу сообщений между пользователем и технической поддержкой. ([AC_2](#альтернативные-сценарии))
5. Сценарий завершен.


<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->






### Альтернативные сценарии:
AC_1. Некорректный запрос пользователя. <br>
АС_2. Обрыв соединения приложения с Интернетом\ Отсутствует подключение к серверу. <br>
АС_3. Упала БД<br>
AC_4. Попытка двух пользователей записаться на одно время. <br>
AC_5. Платежная система не работает.


## Нефункциональные требования:

### AL01 Алгоритм поиска моек по адресу или геолокации
1. Система формирует запрос в БД
2. ...
3. ...
4. Система возвращает список моек сценарию, который вызвал алгоритм











